<!-- Modal Filter -->
<div *ngIf="displayFilterModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white w-full md:w-1/2 lg:w-1/2 p-8 rounded-lg shadow-lg max-h-[60vh] overflow-y-auto relative">
    <!-- Close Button (X) -->
    <button (click)="closeFilterModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Modal Header -->
    <div class="flex justify-between items-center mb-6">
      <div>
        <h2 class="text-lg font-semibold">Select Filter</h2>
        <p class="text-xs text-gray-500 mt-1">
          Please select a transaction type to filter down the data. Once selected, you <br />
          can also specify the status and its channel.
        </p>
      </div>

      <div class="flex space-x-4">
        <button class="text-blue-500 text-sm hover:underline" (click)="clearFilters()">Clear</button>
        <button class="bg-blue-500 text-white text-sm px-4 py-2 rounded-md hover:bg-blue-600" (click)="applyFilters()">Add Filter</button>
      </div>
    </div>

    <!-- Garis Horizontal -->
    <hr class="my-4 border-t-2 border-gray-200" />

    <!-- Filter Content (Grid Layout dengan Garis Pemisah) -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Transaction Type Section -->
      <div class="border-r-2 border-gray-200 pr-4 md:pr-6">
        <h3 class="text-lg font-semibold mb-2">Transaction Type</h3>
        <div class="space-y-3">
          <label class="flex items-center">
            <input type="radio" name="transactionType" [(ngModel)]="selectedTransactionType" value="All" class="mr-2" />
            All
          </label>
          <label class="flex items-center">
            <input type="radio" name="transactionType" [(ngModel)]="selectedTransactionType" value="Payment" class="mr-2" />
            Payment
          </label>
          <label class="flex items-center">
            <input type="radio" name="transactionType" [(ngModel)]="selectedTransactionType" value="Withdrawal" class="mr-2" />
            Withdrawal
          </label>
        </div>
      </div>

      <!-- Status Section -->
      <div class="border-r-2 border-gray-200 px-4 md:px-6">
        <h3 class="text-lg font-semibold mb-2">Status</h3>
        <ng-container *ngIf="selectedTransactionType === 'All' || selectedTransactionType === 'Payment'">
          <p class="text-sm text-gray-500 mb-4">Payment</p>
          <div class="space-y-3">
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.authorize" class="mr-2" />
              Authorize
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.success" class="mr-2" />
              Success
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.challenge" class="mr-2" />
              Challenge
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.settlement" class="mr-2" />
              Settlement
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.refund" class="mr-2" />
              Refund
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.chargeback" class="mr-2" />
              Chargeback
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.expired" class="mr-2" />
              Expired
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.pending" class="mr-2" />
              Pending
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.cancelled" class="mr-2" />
              Cancelled
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.failed" class="mr-2" />
              Failed
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.denied" class="mr-2" />
              Denied
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.reversal" class="mr-2" />
              Reversal
            </label>
          </div>
        </ng-container>
        <ng-container *ngIf="selectedTransactionType === 'All' || selectedTransactionType === 'Withdrawal'">
          <p class="text-sm text-gray-500 mb-4">Withdrawal</p>
          <div class="space-y-3">
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.requested" class="mr-2" />
              Requested
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.processing" class="mr-2" />
              Processing
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.success" class="mr-2" />
              Success
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.failed" class="mr-2" />
              Failed
            </label>
            <label class="flex items-center">
              <input type="checkbox" [(ngModel)]="statusFilters.cancelled" class="mr-2" />
              Cancelled
            </label>
          </div>
        </ng-container>
      </div>

      <!-- Channel Section -->
      <div class="pl-4 md:pl-6">
        <h3 class="text-lg font-semibold mb-2">Channel</h3>
        <input
          type="text"
          placeholder="Search"
          [(ngModel)]="searchQuery"
          class="border rounded-md w-full px-3 py-2 mb-4"
        />
        <ng-container>
          <div class="space-y-3">
            <div *ngFor="let channel of filteredChannels">
              <label class="flex items-center">
                <input type="checkbox" [(ngModel)]="channelFilters[channel.key]" class="mr-2" />
                {{ channel.name }}
              </label>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
